<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>在庫アラート通知</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.5;
        color: #333;
        background-color: #f5f5f5;
        margin: 0;
        padding: 20px;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        background-color: #ffffff;
        border: 1px solid #ddd;
        border-radius: 4px;
        overflow: hidden;
      }
      .header {
        background-color: <%= @alert_type == 'low_stock' ? '#dc3545' : '#ffc107' %>;
        color: white;
        padding: 20px;
        text-align: center;
      }
      .header h1 {
        margin: 0;
        font-size: 20px;
        font-weight: bold;
      }
      .content {
        padding: 20px;
      }
      .alert-message {
        background-color: <%= @alert_type == 'low_stock' ? '#f8d7da' : '#fff3cd' %>;
        border: 1px solid <%= @alert_type == 'low_stock' ? '#f5c6cb' : '#ffeaa7' %>;
        border-radius: 4px;
        padding: 15px;
        margin: 15px 0;
        font-weight: bold;
      }
      .item-details {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        padding: 15px;
        margin: 15px 0;
      }
      .detail-row {
        margin-bottom: 8px;
        padding: 5px 0;
        border-bottom: 1px solid #e9ecef;
      }
      .detail-row:last-child {
        border-bottom: none;
        margin-bottom: 0;
      }
      .detail-label {
        font-weight: bold;
        color: #495057;
        display: inline-block;
        width: 80px;
      }
      .detail-value {
        color: #212529;
      }
      .stock-status {
        background-color: #e7f3ff;
        border: 1px solid #b3d9ff;
        border-radius: 4px;
        padding: 15px;
        margin: 15px 0;
        text-align: center;
      }
      .current-stock {
        font-size: 20px;
        font-weight: bold;
        color: #0066cc;
        margin: 10px 0;
      }
      .threshold-info {
        color: #666;
        font-size: 14px;
      }
      .action-links {
        text-align: center;
        margin: 20px 0;
      }
      .action-link {
        display: inline-block;
        background-color: #007bff;
        color: white;
        text-decoration: none;
        padding: 10px 20px;
        border-radius: 4px;
        margin: 5px;
        font-size: 14px;
        font-weight: bold;
      }
      .action-link:hover {
        background-color: #0056b3;
        color: white;
      }
      .action-link.primary {
        background-color: #007bff;
        color: white;
      }
      .action-link.primary:hover {
        background-color: #0056b3;
        color: white;
      }
      .action-link.success {
        background-color: #28a745;
        color: white;
      }
      .action-link.success:hover {
        background-color: #1e7e34;
        color: white;
      }
      .footer {
        background-color: #f8f9fa;
        padding: 15px;
        text-align: center;
        color: #6c757d;
        font-size: 12px;
        border-top: 1px solid #dee2e6;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- ヘッダー -->
      <div class="header">
        <h1><%= @alert_type == 'low_stock' ? '在庫不足アラート' : '在庫過剰アラート' %></h1>
        <p style="margin: 5px 0 0 0; font-size: 14px;">
          <%= @company.name %>様
        </p>
      </div>

      <!-- メインコンテンツ -->
      <div class="content">
        <div class="alert-message">
          <%= @alert_message %>
        </div>

        <!-- 物品情報 -->
        <div class="item-details">
          <h3 style="margin-top: 0; color: #495057; font-size: 16px;">物品情報</h3>
          <div class="detail-row">
            <span class="detail-label">物品名:</span>
            <span class="detail-value"><%= @item.name %></span>
          </div>
          <% if @item.sku.present? %>
            <div class="detail-row">
              <span class="detail-label">型式:</span>
              <span class="detail-value"><%= @item.sku %></span>
            </div>
          <% end %>
          <div class="detail-row">
            <span class="detail-label">分類:</span>
            <span class="detail-value"><%= @category %></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">保管場所:</span>
            <span class="detail-value"><%= @location %></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">発注先:</span>
            <span class="detail-value"><%= @supplier %></span>
          </div>
        </div>

        <!-- アクションリンク -->
        <div class="action-links">
          <a href="<%= Rails.application.routes.url_helpers.item_url(@item, host: 'localhost:3000') %>" class="action-link primary">
            物品詳細を確認
          </a>
          <a href="<%= Rails.application.routes.url_helpers.alerts_stock_url(host: 'localhost:3000') %>" class="action-link success">
            アラート一覧を確認
          </a>
        </div>
      </div>

      <!-- フッター -->
      <div class="footer">
        <p>
          このメールは FlapStock システムから自動送信されました。<br>
          お心当たりのない場合は、システム管理者にお問い合わせください。
        </p>
        <p style="margin-top: 10px;">
          © <%= Date.current.year %> FlapStock. All rights reserved.
        </p>
      </div>
    </div>
  </body>
</html>
